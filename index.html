<!doctype html>

<html>

<head>

<meta charset="utf-8">

<!-- load D3js -->
<script src="d3.js"></script>

<!-- load topojson library -->
<script src="topojson.js"></script>

<!-- load D3plus after D3js -->
<script src="d3plus.js"></script>

<!-- create container element for visualization -->
<div id="viz"></div>
    
<style>
    
    body {
        background-color:#ffffff;
        
    }
    
    .info {
        margin-left: 2em;
        margin-right: 2em;
        padding:20px;
        font-family: Arial, Helvetica, sans-serif;
        /*background-color: #969696;
        color:white;
        border-radius: 25px;*/
    }
    
    tspan {
        font-family: Arial, Helvetica, sans-serif;
        /*font-size:1.3em;*/
        margin:30px;
    }
    
    #viz {
        /*margin-top:200px;
        width: 800px;   
        height: 800px;*/
    }
    
    #viz_sankey {
        width: 1200px;
        height:600px;
        margin-top:100px;
        margin-left:400px;
        margin-right:300px;
        margin-bottom:200px;
        
    }
    

    
 
    
</style>

</head>

<body>

<!-- total-actris-near-surface-and-profile-users map -->
    
<div id="total-actris-near-surface-and-profile-users">

</div>
    
<script>

var sample_data = [
    {"#Unique client IPs by user country":36, "country":"eunor", "name":"Norway"},
    {"#Unique client IPs by user country":50, "country":"nausa", "name":"United States"},
    {"#Unique client IPs by user country":30, "country":"eugbr", "name":"United Kingdom"},
    {"#Unique client IPs by user country":60, "country":"euche", "name":"Switzerland"},
    {"#Unique client IPs by user country":38, "country":"eudeu", "name":"Germany"},
    {"#Unique client IPs by user country":22, "country":"eufra", "name":"France"},
    {"#Unique client IPs by user country":13, "country":"eunld", "name":"Netherlands"},
    {"#Unique client IPs by user country":23, "country":"eugrc", "name":"Greece"},
    {"#Unique client IPs by user country":26, "country":"eufin", "name":"Finland"},
    {"#Unique client IPs by user country":16, "country":"euswe", "name":"Sweden"},
    {"#Unique client IPs by user country":20, "country":"aschn", "name":"China"}, 
    {"#Unique client IPs by user country":26, "country":"euita", "name":"Italy"},
    {"#Unique client IPs by user country":14, "country":"euesp", "name":"Spain"},
    {"#Unique client IPs by user country":15, "country":"asjpn", "name":"Japan"},
    {"#Unique client IPs by user country":9, "country":"nacan", "name":"Canada"},
    {"#Unique client IPs by user country":4, "country":"eucze", "name":"Czech Republic"},
    {"#Unique client IPs by user country":3, "country":"euirl", "name":"Ireland"},
    {"#Unique client IPs by user country":2, "country":"euaut", "name":"Austria"},
    {"#Unique client IPs by user country":6, "country":"eudnk", "name":"Denmark"},
    {"#Unique client IPs by user country":10, "country":"eupol", "name":"Poland"},
    {"#Unique client IPs by user country":1, "country":"euhun", "name":"Hungary"},
    {"#Unique client IPs by user country":3, "country":"ocaus", "name":"Australia"},
    {"#Unique client IPs by user country":1, "country":"eubel", "name":"Belgium"},
    {"#Unique client IPs by user country":2, "country":"eultu", "name":"Lithuania"},
    {"#Unique client IPs by user country":1, "country":"euisl", "name":"Iceland"},
    {"#Unique client IPs by user country":4, "country":"ascyp", "name":"Cyprus"},
    {"#Unique client IPs by user country":6, "country":"askor", "name":"South Korea"},
    {"#Unique client IPs by user country":2, "country":"asind", "name":"India"},
    {"#Unique client IPs by user country":3, "country":"eusrb", "name":"Serbia"},
    {"#Unique client IPs by user country":2, "country":"sabol", "name":"Bolivia"},
    {"#Unique client IPs by user country":1, "country":"euhrv", "name":"Croatia"},
    {"#Unique client IPs by user country":3, "country":"eurou", "name":"Romania"},
    {"#Unique client IPs by user country":4, "country":"euprt", "name":"Portugal"},
    {"#Unique client IPs by user country":1, "country":"aspak", "name":"Pakistan"},
    {"#Unique client IPs by user country":1, "country":"asare", "name":"United Arab Emirates"},
    {"#Unique client IPs by user country":2, "country":"asvnm", "name":"Vietnam"},
    {"#Unique client IPs by user country":1, "country":"asirn", "name":"Iran"},
    {"#Unique client IPs by user country":1, "country":"eublr", "name":"Belarus"},
    {"#Unique client IPs by user country":1, "country":"ashkg", "name":"Hong Kong"},
    {"#Unique client IPs by user country":3, "country":"eusvn", "name":"Slovenia"},
    
]

  var visualization = d3plus.viz()
    .container("#total-actris-near-surface-and-profile-users")       
    .data(sample_data)        
    .coords("countries.json")
    .type("geo_map")          
    .id("country")            
    .text("name")
    .background("#ffffff") 
    .legend({
        "value": true,
        "size":2
    })
    .color({
        "heatmap":["#3690c0","#a50f15"],
        "value":"#Unique client IPs by user country",
    })
    .tooltip("#Unique client IPs by user country")
    .title({
    "sub": "Total ACTRIS: Near surface + profile users (40 countries in total)",
      "total": true,
      "width": 1200
       
    })
    .font({"size": 30})   
    .draw()                   
  
</script>
<img src="actris-logo.png" alt="actris logo">

    <p style="font-size:1em;" class="info"><i></i></p>

<br>
    
<hr>
    
<!-- New map -->
    
    
<div id="actris-user-distribution">

</div>
    
<script>

var sample_data = [
    {"visits":4.034, "country":"eunor", "name":"Norway"},
    {"visits":0.261, "country":"nausa", "name":"United States"},
    {"visits":58.796, "country":"eugbr", "name":"United Kingdom"},
    {"visits":2.909, "country":"euche", "name":"Switzerland"},
    {"visits":3.053, "country":"eudeu", "name":"Germany"},
    {"visits":3.074, "country":"eufra", "name":"France"},
    {"visits":1.813, "country":"eunld", "name":"Netherlands"},
    {"visits":2.289, "country":"eugrc", "name":"Greece"},
    {"visits":2.071, "country":"eufin", "name":"Finland"},
    {"visits":1.390, "country":"euswe", "name":"Sweden"},
    {"visits":0.251, "country":"aschn", "name":"China"}, 
    {"visits":1.125, "country":"euita", "name":"Italy"},
    {"visits":2.376, "country":"euesp", "name":"Spain"},
    {"visits":0.147, "country":"asjpn", "name":"Japan"},
    {"visits":0.516, "country":"eucze", "name":"Czech Republic"},
    {"visits":0.122, "country":"euirl", "name":"Ireland"},
    {"visits":1.455, "country":"euaut", "name":"Austria"},
    {"visits":0.181, "country":"eudnk", "name":"Denmark"},
    {"visits":2.188, "country":"eupol", "name":"Poland"},
    {"visits":0.048, "country":"euhun", "name":"Hungary"},
    {"visits":0.373, "country":"asrus", "name":"Russia"},
    {"visits":0.071, "country":"ocaus", "name":"Australia"},
    {"visits":0.467, "country":"eubel", "name":"Belgium"},
    {"visits":1.105, "country":"eultu", "name":"Lithuania"},
    {"visits":0.306, "country":"euisl", "name":"Iceland"},
    {"visits":0.963, "country":"ascyp", "name":"Cyprus"},
    {"visits":0.028, "country":"askor", "name":"South Korea"},
    {"visits":0.031, "country":"asind", "name":"India"},
    {"visits":0.040, "country":"eusrb", "name":"Serbia"},
    {"visits":0.020, "country":"eusvn", "name":"Slovenia"},
    {"visits":0.234, "country":"euest", "name":"Estonia"},
    {"visits":0.393, "country":"eubgr", "name":"Bulgaria"},
    {"visits":0.025, "country":"ocidn", "name":"Indonesia"},
    {"visits":1.956, "country":"eurou", "name":"Romania"},
    {"visits":0.009, "country":"asomn", "name":"Oman"},
    {"visits":0.020, "country":"eumda", "name":"Moldova"},
    {"visits":0.044, "country":"samex", "name":"Mexico"},
    {"visits":0.055, "country":"euprt", "name":"Portugal"},
    {"visits":0.082, "country":"askaz", "name":"Kazakhstan"},
    {"visits":0.108, "country":"aspak", "name":"Pakistan"},
    {"visits":0.131, "country":"asisr", "name":"Israel"},
    {"visits":0.198, "country":"astur", "name":"Turkey"},
    {"visits":0.214, "country":"sabra", "name":"Brazil"},
    {"visits":0.037, "country":"saarg", "name":"Argentina"},
    {"visits":0.019, "country":"sachl", "name":"Chile"},
    {"visits":0.011, "country":"eusvk", "name":"Slovakia"},
    {"visits":0.005, "country":"saecu", "name":"Ecuador"},
    {"visits":0.004, "country":"eulux", "name":"Luxembourg"},
    {"visits":0.004, "country":"octkl", "name":"Tokelau"},
    {"visits":0.003, "country":"asphl", "name":"Phillippines"},
    {"visits":0.358, "country":"euukr", "name":"Ukraine"}
    
]

  var visualization = d3plus.viz()
    .container("#actris-user-distribution")       
    .data(sample_data)        
    .coords("countries.json")
    .type("geo_map")          
    .id("country")            
    .text("name")
    .background("#ffffff") 
    .legend({
        "value": true,
        "size":2
    })
    .color({
        "heatmap":["#3690c0","#a50f15"],
        "value":"visits",
    })
    .tooltip("visits")
    .format({
    "number": function(number) {
        
        return parseFloat(number).toFixed(3) + " %";
    }
    })
    .title({
       "sub": "Global distribution of visits to the ACTRIS portal (51 countries in total)",
      //"total": true,
      "width": 1200
       
    })
    .font({"size": 30})   
    .draw()                   
  
</script>
<img src="actris-logo.png" alt="actris logo">

    <p style="font-size:1em;" class="info"><i></i></p>

<br>
    
<hr>
    
<!-- Geographical distribution of users over May 2015 - Aug 2016 -->
    
<div id="ebas-db">

</div>
    
<script>

var sample_data = [
    
    {"# of unique IPs":33, "country":"eunor", "name":"Norway"},
    {"# of unique IPs":48, "country":"nausa", "name":"United States"},
    {"# of unique IPs":27, "country":"eugbr", "name":"United Kingdom"},
    {"# of unique IPs":29, "country":"eudeu", "name":"Germany"},
    {"# of unique IPs":59, "country":"euche", "name":"Switzerland"},
    {"# of unique IPs":15, "country":"euswe", "name":"Sweden"},
    {"# of unique IPs":25, "country":"eufin", "name":"Finland"},
    {"# of unique IPs":20, "country":"eufra", "name":"France"},
    {"# of unique IPs":16, "country":"eugrc", "name":"Greece"},
    {"# of unique IPs":19, "country":"euita", "name":"Italy"},
    {"# of unique IPs":10, "country":"aschn", "name":"China"},
    {"# of unique IPs":14, "country":"asjpn", "name":"Japan"},
    {"# of unique IPs":13, "country":"eunld", "name":"Netherlands"},
    {"# of unique IPs":4, "country":"eucze", "name":"Czech Republic"},
    {"# of unique IPs":9, "country":"nacan", "name":"Canada"},
    {"# of unique IPs":8, "country":"euesp", "name":"Spain"},
    {"# of unique IPs":6, "country":"askor", "name":"South Korea"},
    {"# of unique IPs":6, "country":"eudnk", "name":"Denmark"},
    {"# of unique IPs":7, "country":"eupol", "name":"Poland"},
    {"# of unique IPs":3, "country":"ocaus", "name":"Australia"},
    {"# of unique IPs":1, "country":"euisl", "name":"Iceland"},
    {"# of unique IPs":2, "country":"asind", "name":"India"},
    {"# of unique IPs":2, "country":"euirl", "name":"Ireland"},
    {"# of unique IPs":1, "country":"euaut", "name":"Austria"},
    {"# of unique IPs":1, "country":"euhrv", "name":"Croatia"},
    {"# of unique IPs":1, "country":"euhun", "name":"Hungary"},
    {"# of unique IPs":1, "country":"eurou", "name":"Romania"},
    {"# of unique IPs":3, "country":"eusrb", "name":"Serbia"},
    {"# of unique IPs":2, "country":"eultu", "name":"Lithuania"},
    {"# of unique IPs":1, "country":"ashkg", "name":"Hong Kong"},
    {"# of unique IPs":2, "country":"sabol", "name":"Bolivia"},
    {"# of unique IPs":1, "country":"asare", "name":"United Arab Emirates"},
    {"# of unique IPs":3, "country":"eusvn", "name":"Slovenia"},
    {"# of unique IPs":2, "country":"ascyp", "name":"Cyprus"}

]

  var visualization = d3plus.viz()
    .container("#ebas-db")       
    .data(sample_data)        
    .coords("countries.json")
    .type("geo_map")          
    .id("country")            
    .text("name")
    .background("#ffffff") 
    .legend({
        "value": true,
        "size":2
    })
    .color({
        "heatmap":["#3690c0","#a50f15"],
        "value":"# of unique IPs",
    })
    .tooltip("# of unique IPs")
    .title({
       "sub": "Global distribution of users of ACTRIS near surface data (34 countries in total)",
      "total": true,
      "width": 1200
       
    })
    .font({"size": 30})   
    .draw()                   
  
</script>
<img src="actris-logo.png" alt="actris logo">

    <p style="font-size:1em;" class="info"><i></i></p>    

<!-- NEW MAP -->

    <br>
    
    <hr>
    
    
        
<div id="near-surface-data">

</div>
    
<script>

var sample_data = [
    
    {"# of unique IPs":3, "country":"eunor", "name":"Norway"},
    {"# of unique IPs":2, "country":"nausa", "name":"United States"},
    {"# of unique IPs":3, "country":"eugbr", "name":"United Kingdom"},
    {"# of unique IPs":9, "country":"eudeu", "name":"Germany"},
    {"# of unique IPs":1, "country":"euche", "name":"Switzerland"},
    {"# of unique IPs":1, "country":"euswe", "name":"Sweden"},
    {"# of unique IPs":1, "country":"eufin", "name":"Finland"},
    {"# of unique IPs":2, "country":"eufra", "name":"France"},
    {"# of unique IPs":7, "country":"eugrc", "name":"Greece"},
    {"# of unique IPs":7, "country":"euita", "name":"Italy"},
    {"# of unique IPs":10, "country":"aschn", "name":"China"},
    {"# of unique IPs":1, "country":"asjpn", "name":"Japan"},
    {"# of unique IPs":6, "country":"euesp", "name":"Spain"},
    {"# of unique IPs":3, "country":"eupol", "name":"Poland"},
    {"# of unique IPs":1, "country":"eubel", "name":"Belgium"},
    {"# of unique IPs":1, "country":"euirl", "name":"Ireland"},
    {"# of unique IPs":1, "country":"euaut", "name":"Austria"},
    {"# of unique IPs":1, "country":"eublr", "name":"Belarus"},
    {"# of unique IPs":4, "country":"euprt", "name":"Portugal"},
    {"# of unique IPs":2, "country":"eurou", "name":"Romania"},
    {"# of unique IPs":1, "country":"asirn", "name":"Iran"},
    {"# of unique IPs":2, "country":"ascyp", "name":"Cyprus"},
    {"# of unique IPs":2, "country":"asvnm", "name":"Vietnam"},

]

  var visualization = d3plus.viz()
    .container("#near-surface-data")       
    .data(sample_data)        
    .coords("countries.json")
    .type("geo_map")          
    .id("country")            
    .text("name")
    .background("#ffffff") 
    .legend({
        "value": true,
        "size":2
    })
    .color({
        "heatmap":["#3690c0","#a50f15"],
        "value":"# of unique IPs",
    })
    .tooltip("# of unique IPs")
    .title({
      // "sub": "Global distribution of ACTRIS profile data 2015- September 2016. (24 countries in total)",
      "sub": "Global distribution of users of ACTRIS profile data 2015- September 2016. (24 countries in total)",
      "total": true,
      "width": 1200
       
    })
    .font({"size": 30})   
    .draw()                   
  
</script>
<img src="actris-logo.png" alt="actris logo">

    <p style="font-size:1em;" class="info"><i></i></p>    
    
    
</body>

</html>
